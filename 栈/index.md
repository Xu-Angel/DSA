# 栈

>栈（stack）又名堆栈，它是一种运算受限的线性表。

其限制是仅允许在表的一端进行插入和删除运算。这一端被称为**栈顶**，相对地，把另一端称为**栈底**。

向一个栈插入新元素又称作进栈、入栈或压栈，它是把新元素放到栈顶元素的上面，使之成为新的栈顶元素；

从一个栈删除元素又称作出栈或退栈，它是把栈顶元素删除掉，使其相邻的元素成为新的栈顶元素。

栈的特点是先进先出，只允许在一端插入和删除数据。

## 常含几个方法

- push(element(s))：添加一个（或几个）新元素到栈顶。
- pop() ：移除栈顶的元素，同时返回被移除的元素。
- peek() ：返回栈顶的元素，不对栈做任何修改（这个方法不会移除栈顶的元素，仅仅返回它）。
- isEmpty() ：如果栈里没有任何元素就返回 true ，否则返回 false 。
- clear() ：移除栈里的所有元素。
- size() ：返回栈里的元素个数。这个方法和数组的 length 属性很类似。
  
## 如何实现一个栈

栈可以用数组实现，也可以用链表来实现。
```javascript
function Stack(){
    var items = [];
    
    //入栈
    this.push = function(elem){
        items.push(elem);
    }
    
    //出栈
    this.pop = function(){
        return items.pop();
    }
    
    //返回栈顶元素
    this.peek = function(){
        return items[items.length -1];
    }

    //是否是空栈
    this.isEmpty = function(){
        return items.length;
    }

    //栈的长度
    this.size = function(){
        return items.length;
    }

    //清空栈
    this.clear = function(){
        items = [];
    }

    //打印栈
    this.print = function(){
        console.log(items.toString());
    }
}
```

## 栈的应用

### 栈在函数调用中的应用

函数被调用时，会被加入到调用栈顶部，执行结束后，就会从调用栈顶移除该函数。
```javascript
function a (){
    b();
}

function b(){
    c();
};

a();
```
 ![](https://cdn.nlark.com/yuque/0/2018/png/174243/1542091882645-558a3997-dd15-4586-b568-c821da120f5b.png) 
 
上图表示函数调用执行过程栈的变化。

### 栈在表达式求值中的应用

表达式求值是通过两个栈来实现，一个栈保存操作数，另一个栈保存运算符。

从左向右遍历表达式，当遇到数字时，将数字压入操作数栈；当遇到操作符时，与运算符栈的栈顶元素比较。

如果比运算符栈顶元素的优先级高，就将当前运算符压入栈；

如果比运算符栈顶元素的优先级低或者相同，从运算符中取栈顶运算符，从操作数栈的栈顶取2个操作数，然后进行计算，再把计算结果压入操作数栈，继续比较。

例子：

 ![](https://cdn.nlark.com/yuque/0/2018/png/174243/1542092961762-ec301065-886e-4c72-a8b9-c3f6e35092a7.png) 

### [](#6s51gs)[](#6s51gs)栈在括号匹配中的应用

用来检测括号的嵌套是否合法

## 解答开篇

实现浏览器的前进和后退功能，使用两个栈（X和Y）实现。

*   首次浏览的页面依次压入栈X

*   当点击后退时，再依次从栈X中出栈，并将出栈的数据依次压入栈Y

*   当点击前进时，依次从栈Y中出栈，并将出栈的数据依次压入X
    
*   当栈X中没有数据时，说明没有页面可以继续后退浏览
    
*   当栈Y中没有数据时，说明没有页面可以继续前进浏览
    
## 思考

1.为什么函数调用要用“栈”来保存临时变量？用其他数据结构不行吗？

参考答案：

 ![](https://cdn.nlark.com/yuque/0/2018/png/174243/1542093759288-c4c13d54-bc10-41c5-a01f-64fb49da063a.png)